{% extends "base.html" %}

{% block title %}Filmes - ReviewHub{% endblock %}

{% block content %}


<article class="text-center">
    <form method="get" class="genre-filter">
        <select name="genero" onchange="this.form.submit()">
            <option value="">Todos os gÃªneros</option>
            
            {% for genero in generos %}
                <option value="{{ genero['nome'] }}"
                    {% if selected_genero == genero['nome'] %}selected{% endif %}>
                    {{ genero['nome'] }}
                </option>
        {% endfor %}
    </select>
    </form>
    <p id="subtitle-movie">Selecione um filme para avaliar</p>
</article>

{% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
        <ul class="flash-messages">
            {% for msg in messages %}
                <li class="{{msg[0]}}">{{ msg[1] }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}

<section class="movies-grid">
    {% for movie in movies %}
    <a href="{{ url_for('movies.details_page', id=movie.id) }}" class="movie-card">
        <article class="movie-poster">
            <figure>
                <img src="{{ movie.imagem }}" alt="{{ movie.nome }}" loading="lazy">
            </figure>
            <div class="movie-overlay"></div>
        </article>
    </a>
    {% endfor %}
</section>
{% endblock %}
